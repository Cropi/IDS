-- Purpose:     IDS project
-- Author(s):   xadame42
--              xlakat01
-- Date:        22.3.2018

-- DROP TABLES

DROP TABLE Uzivatel;
DROP TABLE NavstevovaneSkoly;
DROP TABLE TextovyPrispevek;
DROP TABLE Fotka;
DROP TABLE Album;
DROP TABLE Akce;
DROP TABLE Zprava;
DROP TABLE Konverzace;
DROP TABLE Vztah;
DROP TABLE Oznaceni;
DROP TABLE SoucastiAlba;
DROP TABLE UcastNaAkci;
DROP TABLE SoucastiKonverzace;

-- CREATE TABLES

CREATE TABLE Uzivatel(
    EMAIL VARCHAR2(50) NOT NULL,
    Jmeno VARCHAR(25) NOT NULL,
    Prijmeni VARCHAR(25) NOT NULL,
    Bydliste VARCHAR(50) NOT NULL,
    Zamestnani VARCHAR(25) NOT NULL,
    Kontakt VARCHAR(25) NOT NULL
);


CREATE TABLE NavstevovaneSkoly(
    EMAIL VARCHAR2(50) NOT NULL
);


CREATE TABLE TextovyPrispevek(
    IDPrivespeku integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1  INCREMENT BY 1) NOT NULL,
    Obsah VARCHAR2(100) NOT NULL,
    CasPublikovani TIMESTAMP NOT NULL,
    DatumPublikovani DATE NOT NULL,
    MistoPublikovani VARCHAR(25) NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL
);


CREATE TABLE Fotka(
    IDPrivespeku integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1  INCREMENT BY 1) NOT NULL,
    Obsah VARCHAR2(100) NOT NULL,
    CasPublikovani TIMESTAMP NOT NULL,
    DatumPublikovani DATE NOT NULL,
    MistoPublikovani VARCHAR2(25) NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL,
    IDAkce integer NOT NULL
);


CREATE TABLE Album(
    IDAlba integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1  INCREMENT BY 1) NOT NULL,
    Nazev VARCHAR2(25) NOT NULL,
    Popis VARCHAR2(50) NOT NULL,
    NastaveniSoukromi VARCHAR(10) NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL,
    IDPrivespeku integer NOT NULL
);


CREATE TABLE Akce(
    IDAkce integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1  INCREMENT BY 1) NOT NULL,
    Nazev VARCHAR2(25) NOT NULL,
    PopisAkce VARCHAR2(50) NOT NULL,
    CasKonani TIMESTAMP NOT NULL,
    DatumKonani DATE NOT NULL,
    MistoKonani VARCHAR2(25) NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL
);


CREATE TABLE Zprava(
    IDZpravy integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1  INCREMENT BY 1) NOT NULL,
    Obsah VARCHAR2(100) NOT NULL,
    CasZaslani TIMESTAMP NOT NULL,
    DatumZaslani DATE NOT NULL,
    MistoZaslani VARCHAR2(25) NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL,
    IDKonverzace integer NOT NULL
);


CREATE TABLE Konverzace(
    IDKonverzace integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1  INCREMENT BY 1) NOT NULL,
    Nazev VARCHAR2(25) NOT NULL
);


-- Vztahy
CREATE TABLE Vztah(
    EMAIL1 VARCHAR2(50) NOT NULL,
    EMAIL2 VARCHAR2(50) NOT NULL,
    TypVztahu VARCHAR2(50) NOT NULL
);


CREATE TABLE Oznaceni(
    EMAIL VARCHAR2(50) NOT NULL,
    IDPrivespeku integer NOT NULL
);


CREATE TABLE SoucastiAlba(
    IDAlba integer NOT NULL,
    IDPrivespeku integer NOT NULL
);


CREATE TABLE UcastNaAkci(
    EMAIL VARCHAR2(50) NOT NULL,
    IDAkce integer NOT NULL
);


CREATE TABLE SoucastiKonverzace(
    EMAIL VARCHAR2(50) NOT NULL,
    IDKonverzace integer NOT NULL
);





-- INSERT PRIMARY KEYS TO TABLES
ALTER TABLE Uzivatel ADD CONSTRAINT PK_EMAIL PRIMARY KEY(EMAIL);




-- INSERT FOREIGN KEYS TO TABLES





-- INSERT VALUES INTO TABLES





-- SHOW TABLES
